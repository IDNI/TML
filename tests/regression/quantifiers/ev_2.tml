#transitive closure
T(?a ?b ?c ?d ?e ?f ?g ?h ?i ?j ?y) :- {
          { {?d = ?e } -> { {?a = ?c} && {?b = ?f} && {?y = 1} } &&
          { ~{?d = ?e } -> {?y = 0} } } &&
          { {?c = ?d } -> {?g = ?h} } &&
          { {?c = ?e } -> {?g = ?i} } &&
          { {?c = ?f } -> {?g = ?j} } &&
          { {?d = ?e } -> {?h = ?i} } &&
          { {?d = ?f } -> {?h = ?j} } &&
          { {?e = ?f } -> {?i = ?j} }
        }.
R(0 0 2).
R(0 2 1).
R(1 0 1).

R(0 1).
R(1 2).
R(2 3).
R(1 0).
R(0 1).
R(1 2).

R(?g ?j) :- R(1 ?a ?b), R(0 ?c ?d), R(0 ?e ?f), R(?g ?h), R(?i ?j), T(?a ?b ?c ?d ?e ?f ?g ?h ?i ?j 1).
!R(?g ?j).
# ------------------------------------------------------------------------------
R2(0 1).
R2(1 2).
R2(2 3).
R2(1 0).
R2(0 1).
R2(1 2).
R3(?x ?y) :- R2(?x ?y).
R3(?x ?y) :- R3(?x ?z), R2(?z ?y).
!R3(?x ?y).
